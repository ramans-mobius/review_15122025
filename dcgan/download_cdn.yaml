name: Download DCGAN Data From CDN
description: Downloads dataset outputs (train, test, processed data, configs) from CDN
inputs:
  # Input URLs from UploadDataToCDN brick
  - name: train_data_url
    type: String
    description: "URL to train dataset on CDN"
  - name: test_data_url
    type: String
    description: "URL to test dataset on CDN"
  - name: dataset_info_url
    type: String
    description: "URL to dataset info on CDN"
  - name: data_config_url
    type: String
    description: "URL to data config on CDN"
  - name: processed_data_url
    type: String
    description: "URL to processed data on CDN"
  - name: preprocess_metadata_url
    type: String
    description: "URL to preprocess metadata on CDN"
  - name: upload_summary_url
    type: String
    description: "URL to upload summary (optional)"
  
  # CDN credentials
  - name: bearer_token
    type: String
    description: "Bearer token for CDN authentication"

outputs:
  # Recreated outputs (matching Load Dataset and Preprocess outputs)
  - name: train_data
    type: Dataset
    description: "Downloaded train dataset pickle"
  - name: test_data
    type: Dataset
    description: "Downloaded test dataset pickle"
  - name: dataset_info
    type: DatasetInfo
    description: "Downloaded dataset info pickle"
  - name: data_config
    type: String
    description: "Downloaded data config JSON"
  - name: processed_data
    type: Dataset
    description: "Downloaded processed data (GANDataWrapper)"
  - name: preprocess_metadata
    type: String
    description: "Downloaded preprocess metadata pickle"
  - name: download_summary
    type: String
    description: "JSON summary of all downloads"

implementation:
  container:
    image: gurpreetgandhi/nesy-factory:v42
    command:
      - sh
      - -ec
      - |
        # Install required packages
        apt-get update > /dev/null && apt-get install -y curl > /dev/null
        exec "$
